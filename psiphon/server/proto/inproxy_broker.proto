syntax = "proto3";

package psiphond;

import "proto/metadata.proto";

option go_package = "github.com/Psiphon-Labs/psiphon-tunnel-core/psiphon/server/pb";

message InproxyBroker {
    optional psiphond.MetadataClient metadata_client = 1;
    optional psiphond.MetadataDevice metadata_device = 2;
    optional psiphond.MetadataSession metadata_session = 3;
    optional psiphond.MetadataServerEntry metadata_server_entry = 4;
    
    optional psiphond.MetadataMeek metadata_meek = 5;

    // Fields 1-99 are reserved for metadata.

    optional int32 announcement_match_index = 100;
    optional int32 announcement_queue_size = 101;
    optional string answer_error = 102; //LowCardinality
    optional string applied_tactics_tag = 103; //LowCardinality
    optional string broker_event = 104;//LowCardinality
    optional string broker_id = 105;//LowCardinality
    optional int64 connected_clients = 106;
    optional int64 connecting_clients = 107;
    optional string connection_id = 108;
    optional string destination_server_id = 109;//LowCardinality
    optional int64 elapsed_time = 110;
    optional string error = 111; //LowCardinality
    optional string filtered_ice_candidates = 112; //LowCardinality
    optional string fronting_provider_id = 113;//LowCardinality
    optional bool has_IPv6 = 114;
    optional bool has_common_compartment_ids = 115;
    optional bool has_personal_compartment_ids = 116;
    optional bool has_private_IP = 117;
    optional string ice_candidate_types = 118; //LowCardinality
    optional bool is_priority = 119;
    optional int64 limit_downstream_bytes_per_second = 120;
    optional int64 limit_upstream_bytes_per_second = 121;
    optional int64 max_clients = 122;
    optional string meek_server_http_version = 123; //LowCardinality
    optional string nat_type = 124; //LowCardinality
    optional string network_type = 125; //LowCardinality
    optional string new_tactics_tag = 126; //LowCardinality
    optional int64 offer_match_index = 127;
    optional int64 offer_queue_size = 128;
    optional int64 peak_downstream_bytes_per_second = 129; 
    optional int64 peak_upstream_bytes_per_second = 130;
    optional string port_mapping_types = 131; //LowCardinality
    optional bool preferred_nat_match = 132;
    optional int32 protocol_version = 133;
    optional string proxy_id = 134; //LowCardinality
    optional string proxy_nat_type = 135; //LowCardinality
    optional string proxy_port_mapping_types = 136; //LowCardinality
    optional string server_id = 137; //LowCardinality
    optional string stored_tactics_tag = 138; //LowCardinality
    optional bool timed_out = 139;


}
